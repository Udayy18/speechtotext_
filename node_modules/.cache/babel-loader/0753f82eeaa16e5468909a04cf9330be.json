{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\91959\\\\Desktop\\\\js_speechtotext\\\\AzureSpeechReactSample\\\\src\\\\Components\\\\speech.js\";\nimport React, { Component } from 'react';\nimport { Container } from 'reactstrap';\nimport { getTokenOrRefresh } from '../token_util';\nimport { ResultReason } from 'microsoft-cognitiveservices-speech-sdk';\n\nconst speechsdk = require('microsoft-cognitiveservices-speech-sdk');\n\nexport default class Speech extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleLogout = () => {\n      console.log(\"hi logout \");\n      localStorage.setItem(\"loggedin\", 0);\n      window.location.replace(\"/\");\n      console.log(\"redirect successful\");\n    };\n\n    this.state = {\n      displayText: 'INITIALIZED: ready to test speech...'\n    }; // this.handleLogout=this.handleLogout.bind(this);\n  }\n\n  async componentDidMount() {\n    // check for valid speech key/region\n    const tokenRes = await getTokenOrRefresh();\n\n    if (tokenRes.authToken === null) {\n      this.setState({\n        displayText: 'FATAL_ERROR: ' + tokenRes.error\n      });\n    }\n  }\n\n  async sttFromMic() {\n    const tokenObj = await getTokenOrRefresh();\n    const speechConfig = speechsdk.SpeechConfig.fromAuthorizationToken(tokenObj.authToken, tokenObj.region);\n    speechConfig.speechRecognitionLanguage = 'en-IN';\n    const audioConfig = speechsdk.AudioConfig.fromDefaultMicrophoneInput();\n    const recognizer = new speechsdk.SpeechRecognizer(speechConfig, audioConfig);\n    this.setState({\n      displayText: 'speak into your microphone...'\n    });\n    recognizer.recognizeOnceAsync(result => {\n      let displayText;\n\n      if (result.reason === ResultReason.RecognizedSpeech) {\n        displayText = `RECOGNIZED: Text=${result.text}`;\n      } else {\n        displayText = 'ERROR: Speech was cancelled or could not be recognized. Ensure your microphone is working properly.';\n      }\n\n      this.setState({\n        displayText: displayText\n      });\n    });\n  }\n\n  async fileChange(event) {\n    const audioFile = event.target.files[0];\n    console.log(audioFile);\n    const fileInfo = audioFile.name + ` size=${audioFile.size} bytes `;\n    this.setState({\n      displayText: fileInfo\n    });\n    const tokenObj = await getTokenOrRefresh();\n    const speechConfig = speechsdk.SpeechConfig.fromAuthorizationToken(tokenObj.authToken, tokenObj.region);\n    speechConfig.speechRecognitionLanguage = 'en-US';\n    const audioConfig = speechsdk.AudioConfig.fromWavFileInput(audioFile);\n    const recognizer = new speechsdk.SpeechRecognizer(speechConfig, audioConfig);\n    recognizer.recognizeOnceAsync(result => {\n      let displayText;\n\n      if (result.reason === ResultReason.RecognizedSpeech) {\n        displayText = `${result.text}`;\n      } else {\n        displayText = 'ERROR: Speech was cancelled or could not be recognized. Ensure your microphone is working properly.';\n      }\n\n      this.setState({\n        displayText: fileInfo + displayText\n      });\n    });\n  }\n\n  render() {\n    console.log(\"logger\", localStorage.getItem(\"loggedin\"));\n    if (!localStorage.getItem(\"loggedin\")) return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"please login before accessing the portal\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this);else return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"app-container\",\n      children: /*#__PURE__*/_jsxDEV(\"html\", {\n        lang: \"en\",\n        dir: \"ltr\",\n        children: [/*#__PURE__*/_jsxDEV(\"head\", {\n          children: /*#__PURE__*/_jsxDEV(\"title\", {\n            children: \"Speech to text transcription\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"body\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"wrapper\",\n            children: [/*#__PURE__*/_jsxDEV(\"header\", {\n              children: \"Speech to text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              action: \"#\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Transcripted Text\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-6 output-display rounded\",\n                  children: /*#__PURE__*/_jsxDEV(\"code\", {\n                    children: this.state.displayText\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 121,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                id: \"startRecognizeOnceAsyncButton\",\n                onClick: () => this.sttFromMic(),\n                children: \"Start\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                id: \"logoutbutton\",\n                onClick: () => this.handleLogout(),\n                children: \"logout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"script\", {\n            src: \"nextpage.js\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/91959/Desktop/js_speechtotext/AzureSpeechReactSample/src/Components/speech.js"],"names":["React","Component","Container","getTokenOrRefresh","ResultReason","speechsdk","require","Speech","constructor","props","handleLogout","console","log","localStorage","setItem","window","location","replace","state","displayText","componentDidMount","tokenRes","authToken","setState","error","sttFromMic","tokenObj","speechConfig","SpeechConfig","fromAuthorizationToken","region","speechRecognitionLanguage","audioConfig","AudioConfig","fromDefaultMicrophoneInput","recognizer","SpeechRecognizer","recognizeOnceAsync","result","reason","RecognizedSpeech","text","fileChange","event","audioFile","target","files","fileInfo","name","size","fromWavFileInput","render","getItem"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Container } from 'reactstrap';\r\nimport { getTokenOrRefresh } from '../token_util';\r\n\r\nimport { ResultReason } from 'microsoft-cognitiveservices-speech-sdk';\r\n\r\nconst speechsdk = require('microsoft-cognitiveservices-speech-sdk')\r\n\r\n\r\nexport default class Speech extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            displayText: 'INITIALIZED: ready to test speech...'\r\n        }\r\n        // this.handleLogout=this.handleLogout.bind(this);\r\n        \r\n    }\r\n    \r\n\r\n    handleLogout = () => {\r\n        console.log(\"hi logout \")\r\n        \r\n        localStorage.setItem(\"loggedin\", 0);\r\n        window.location.replace(\"/\");\r\n        console.log(\"redirect successful\")\r\n    }\r\n    \r\n    async componentDidMount() {\r\n        // check for valid speech key/region\r\n        const tokenRes = await getTokenOrRefresh();\r\n        if (tokenRes.authToken === null) {\r\n            this.setState({\r\n                displayText: 'FATAL_ERROR: ' + tokenRes.error\r\n            });\r\n        }\r\n    }\r\n\r\n    async sttFromMic() {\r\n        const tokenObj = await getTokenOrRefresh();\r\n        const speechConfig = speechsdk.SpeechConfig.fromAuthorizationToken(tokenObj.authToken, tokenObj.region);\r\n        speechConfig.speechRecognitionLanguage = 'en-IN';\r\n        \r\n        const audioConfig = speechsdk.AudioConfig.fromDefaultMicrophoneInput();\r\n        const recognizer = new speechsdk.SpeechRecognizer(speechConfig, audioConfig);\r\n\r\n        this.setState({\r\n            displayText: 'speak into your microphone...'\r\n        });\r\n\r\n        recognizer.recognizeOnceAsync(result => {\r\n            let displayText;\r\n            if (result.reason === ResultReason.RecognizedSpeech) {\r\n                displayText = `RECOGNIZED: Text=${result.text}`\r\n            } else {\r\n                displayText = 'ERROR: Speech was cancelled or could not be recognized. Ensure your microphone is working properly.';\r\n            }\r\n\r\n            this.setState({\r\n                displayText: displayText\r\n            });\r\n        });\r\n    }\r\n\r\n    async fileChange(event) {\r\n        const audioFile = event.target.files[0];\r\n        console.log(audioFile);\r\n        const fileInfo = audioFile.name + ` size=${audioFile.size} bytes `;\r\n\r\n        this.setState({\r\n            displayText: fileInfo\r\n        });\r\n\r\n        const tokenObj = await getTokenOrRefresh();\r\n        const speechConfig = speechsdk.SpeechConfig.fromAuthorizationToken(tokenObj.authToken, tokenObj.region);\r\n        speechConfig.speechRecognitionLanguage = 'en-US';\r\n\r\n        const audioConfig = speechsdk.AudioConfig.fromWavFileInput(audioFile);\r\n        const recognizer = new speechsdk.SpeechRecognizer(speechConfig, audioConfig);\r\n\r\n        recognizer.recognizeOnceAsync(result => {\r\n            let displayText;\r\n            if (result.reason === ResultReason.RecognizedSpeech) {\r\n                displayText = `${result.text}`\r\n            } else {\r\n                displayText = 'ERROR: Speech was cancelled or could not be recognized. Ensure your microphone is working properly.';\r\n            }\r\n\r\n            this.setState({\r\n                displayText: fileInfo + displayText\r\n            });\r\n        });\r\n    }\r\n\r\n    render() {\r\n        console.log(\"logger\" ,localStorage.getItem(\"loggedin\"));\r\n        if(!localStorage.getItem(\"loggedin\"))\r\n        return(\r\n            <div>\r\n                please login before accessing the portal\r\n            </div>\r\n        )\r\n        else\r\n        return(\r\n\r\n        <Container className=\"app-container\">\r\n                <html lang=\"en\" dir=\"ltr\">\r\n                <head>\r\n                    <title>Speech to text transcription</title>\r\n                    {/* <link rel=\"stylesheet\" href=\"nextpage.css\"></link> */}\r\n                </head>\r\n                <body>\r\n                    <div class=\"wrapper\">\r\n                    <header>Speech to text</header>\r\n                    <form action=\"#\">\r\n                        <div class=\"row\">\r\n                        <label>Transcripted Text</label>\r\n                        \r\n                            <div className=\"col-6 output-display rounded\">\r\n                                <code>{this.state.displayText}</code>\r\n                            \r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <button id=\"startRecognizeOnceAsyncButton\" onClick={() => this.sttFromMic() }>Start</button>\r\n                        \r\n                        <button id=\"logoutbutton\" onClick={() => this.handleLogout() }>logout</button>\r\n                    </form>\r\n                    \r\n                    </div>\r\n                    <script src=\"nextpage.js\"></script>\r\n\r\n                </body>\r\n                </html>\r\n                \r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}